---
title: 导致页面加载白屏时间长的原因有哪些，怎么进行优化？
pubDatetime: 2022-10-11T09:39:53.000Z
author: caorushizi
tags:
  - JavaScript
postSlug: 3b7037ed3967d83e6d40b706a42bf6ec
description: >-
  一、白屏时间 白屏时间：即用户点击一个链接或打开浏览器输入URL地址后，从屏幕空白到显示第一个画面的时间。 二、白屏时间的重要性
  当用户点开一个链接或者是直接在浏览器中输入URL开始进行访问时，就开始等待页面的展示。页面渲染的时间越短，用户等待的时间就越短，用户感知到页面的速度就越快。这样可以极大的提升用户的体验，减少用户的跳出，提升页面的留存率。
  三、白屏的过程 从输入url，到页面的画面展示的
difficulty: 4
questionNumber: 1899
source: https://fe.ecool.fun/topic/841bfe02-d07d-45db-9e65-b9c250595d80
---

# 一、白屏时间

白屏时间：即用户点击一个链接或打开浏览器输入 URL 地址后，从屏幕空白到显示第一个画面的时间。

# 二、白屏时间的重要性

当用户点开一个链接或者是直接在浏览器中输入 URL 开始进行访问时，就开始等待页面的展示。页面渲染的时间越短，用户等待的时间就越短，用户感知到页面的速度就越快。这样可以极大的**提升用户的体验，减少用户的跳出，提升页面的留存率。**

# 三、白屏的过程

从输入 url，到页面的画面展示的过程

1、首先，在浏览器地址栏中输入 url

2、浏览器先查看浏览器缓存-系统缓存-路由器缓存，如果缓存中有，会直接在屏幕中显示页面内容。若没有，则跳到第三步操作。

3、在发送 http 请求前，需要域名解析(DNS 解析)，解析获取相应的 IP 地址。

4、浏览器向服务器发起 tcp 连接，与浏览器建立 tcp 三次握手。

5、握手成功后，浏览器向服务器发送 http 请求，请求数据包。

6、服务器处理收到的请求，将数据返回至浏览器

7、浏览器收到 HTTP 响应

8、读取页面内容，浏览器渲染，解析 html 源码

9、生成 Dom 树、解析 css 样式、js 交互,渲染显示页面

浏览器下载 HTML 后，首先解析头部代码，进行样式表下载，然后继续向下解析 HTML 代码，构建 DOM 树，同时进行样式下载。当 DOM 树构建完成后，立即开始构造 CSSOM 树。理想情况下，样式表下载速度够快，DOM 树和 CSSOM 树进入一个并行的过程，当两棵树构建完毕，构建渲染树，然后进行绘制。

Tips:浏览器安全解析策略对解析 HTML 造成的影响：

当解析 HTML 时遇到内联 JS 代码，会阻塞 DOM 树的构建，会先执行完 JS 代码;当 CSS 样式文件没有下载完成时，浏览器解析 HTML 遇到了内联 JS 代码，此时，浏览器暂停 JS 脚本执行，暂停 HTML 解析。直到 CSS 文件下载完成，完成 CSSOM 树构建，重新恢复原来的解析。

JavaScript 会阻塞 DOM 生成，而样式文件又会阻塞 JavaScript 的执行，所以在实际的工程中需要重点关注 JavaScript 文件和样式表文件，使用不当会影响到页面性能的。

# 四、白屏-性能优化

## 1\. DNS 解析优化

针对 DNS Lookup 环节，我们可以针对性的进行 DNS 解析优化。

- DNS 缓存优化
- DNS 预加载策略
- 稳定可靠的 DNS 服务器

## 2\. TCP 网络链路优化

多花点钱吧

## 3\. 服务端处理优化

服务端的处理优化，是一个非常庞大的话题，会涉及到如 Redis 缓存、数据库存储优化或是系统内的各种中间件以及 Gzip 压缩等…

## 4\. 浏览器下载、解析、渲染页面优化

根据浏览器对页面的下载、解析、渲染过程，可以考虑一下的优化处理：

- 尽可能的精简 HTML 的代码和结构
- 尽可能的优化 CSS 文件和结构
- 一定要合理的放置 JS 代码，尽量不要使用内联的 JS 代码
- 将渲染首屏内容所需的关键 CSS 内联到 HTML 中，能使 CSS 更快速地下载。在 HTML 下载完成之后就能渲染了，页面渲染的时间提前，从而缩短首屏渲染时间；
- 延迟首屏不需要的图片加载，而优先加载首屏所需图片（offsetTop<clientHeight）

```js
document.documentElement.clientHeight; //获取屏幕可视区域的高度
element.offsetTop; //获取元素相对于文档顶部的高度
```

因为 JavaScript 会阻塞 DOM 生成，而样式文件又会阻塞 JavaScript 的执行，所以在实际的工程中需要重点关注 JavaScript 文件和样式表文件，使用不当会影响到页面性能的。
