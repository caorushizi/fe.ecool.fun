---
title: 深拷贝浅拷贝有什么区别？怎么实现深拷贝？
pubDatetime: 2022-10-29T16:00:00.000Z
author: caorushizi
tags:
  - 编程题
postSlug: 3f707ed5fadc3fea5119a20782d90b53
description: >-
  ![](https://static.vue-js.com/cdf952e0-69b8-11eb-85f6-6fac77c0c9b3.png)预览一、数据类型存储--------前面文章我们讲到，`J
difficulty: 3.5
questionNumber: 29
source: >-
  https://fe.ecool.fun/topic-answer/a5330a58-5be0-4f4f-8394-43392311ddaa?orderBy=updateTime&order=desc&tagId=26
---

![](https://static.vue-js.com/cdf952e0-69b8-11eb-85f6-6fac77c0c9b3.png)

预览

## 一、数据类型存储

前面文章我们讲到，`JavaScript`中存在两大数据类型：

- 基本类型
- 引用类型

基本类型数据保存在在栈内存中

引用类型数据保存在堆内存中，引用数据类型的变量是一个指向堆内存中实际对象的引用，存在栈中

## 二、浅拷贝

浅拷贝，指的是创建新的数据，这个数据有着原始数据属性值的一份精确拷贝

如果属性是基本类型，拷贝的就是基本类型的值。如果属性是引用类型，拷贝的就是内存地址

即浅拷贝是拷贝一层，深层次的引用类型则共享内存地址

下面简单实现一个浅拷贝

```typescript
undefined;
```

在`JavaScript`中，存在浅拷贝的现象有：

- `Object.assign`
- `Array.prototype.slice()`, `Array.prototype.concat()`
- 使用拓展运算符实现的复制

### Object.assign

```typescript
undefined;
```

### slice()

```typescript
undefined;
```

### concat()

```typescript
undefined;
```

### 拓展运算符

```typescript
undefined;
```

## 三、深拷贝

深拷贝开辟一个新的栈，两个对象的属性完全相同，但是对应两个不同的地址，修改一个对象的属性，不会改变另一个对象的属性

常见的深拷贝方式有：

- \_.cloneDeep()
- jQuery.extend()
- JSON.stringify()
- 手写循环递归

### \_.cloneDeep()

```typescript
undefined;
```

### jQuery.extend()

```typescript
undefined;
```

### JSON.stringify()

```typescript
undefined;
```

但是这种方式存在弊端，会忽略`undefined`、`symbol`和`函数`

```typescript
undefined;
```

### 循环递归

```typescript
undefined;
```

## 四、区别

下面首先借助两张图，可以更加清晰看到浅拷贝与深拷贝的区别

![](https://static.vue-js.com/d9862c00-69b8-11eb-ab90-d9ae814b240d.png)

预览

从上图发现，浅拷贝和深拷贝都创建出一个新的对象，但在复制对象属性的时候，行为就不一样

浅拷贝只复制属性指向某个对象的指针，而不复制对象本身，新旧对象还是共享同一块内存，修改对象属性会影响原对象

```typescript
undefined;
```

但深拷贝会另外创造一个一模一样的对象，新对象跟原对象不共享内存，修改新对象不会改到原对象

```typescript
undefined;
```

### 小结

前提为拷贝类型为引用类型的情况下：

- 浅拷贝是复制内存中的地址，拷贝前后的对象，因为引用类型共享了同一块内存，修改会相互影响。
- 深拷贝是递归拷贝深层次，属性为对象时，深拷贝是新开栈，两个对象指向不同的地址
