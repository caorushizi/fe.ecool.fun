---
title: HTTP1.1 中如何解决 HTTP 的队头阻塞问题？
pubDatetime: 2022-02-06T21:48:01.000Z
author: caorushizi
tags:
  - 计算机网络
postSlug: c0a79b31-1e78-430b-aec4-3bddc4822d79
description: >-
  什么是 HTTP 队头阻塞？ HTTP
  传输是基于请求-应答的模式进行的，报文必须是一发一收，但值得注意的是，里面的任务被放在一个任务队列中串行执行，一旦队首的请求处理太慢，就会阻塞后面请求的处理。这就是著名的
  HTTP队头阻塞 问题。 并发连接
  对于一个域名允许分配多个长连接，那么相当于增加了任务队列，不至于一个队伍的任务阻塞其它所有任务。在RFC2616规定过客户端最多并发 2 个连接，不过事
difficulty: 2
questionNumber: 1666
source: https://fe.ecool.fun/topic/c0a79b31-1e78-430b-aec4-3bddc4822d79
---

## 什么是 HTTP 队头阻塞？

HTTP 传输是基于`请求-应答`的模式进行的，报文必须是一发一收，但值得注意的是，里面的任务被放在一个任务队列中串行执行，一旦队首的请求处理太慢，就会阻塞后面请求的处理。这就是著名的 **HTTP 队头阻塞** 问题。

## 并发连接

对于一个域名允许分配多个长连接，那么相当于增加了任务队列，不至于一个队伍的任务阻塞其它所有任务。在 RFC2616 规定过客户端最多并发 2 个连接，不过事实上在现在的浏览器标准中，这个上限要多很多，Chrome 中是 6 个。

但其实，即使是提高了并发连接，还是不能满足人们对性能的需求。

## 域名分片

一个域名不是可以并发 6 个长连接吗？那我就多分几个域名。

比如 static1.test.com 、static2.test.com。

这样一个 test.com 域名下可以分出非常多的二级域名，而它们都指向同样的一台服务器，能够并发的长连接数更多了，事实上也更好地解决了队头阻塞的问题。
