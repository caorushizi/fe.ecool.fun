{
  "data": {
    "id": 253,
    "exerciseKey": "0cc5abe2-7798-40a6-b930-7dacdb404b8d",
    "category": "QA",
    "renderType": "md",
    "title": "ä½ æ˜¯æ€ä¹ˆå¤„ç†vueé¡¹ç›®ä¸­çš„é”™è¯¯çš„ï¼Ÿ",
    "desc": null,
    "options": null,
    "explanation": "## ä¸€ã€é”™è¯¯ç±»å‹\n\nä»»ä½•ä¸€ä¸ªæ¡†æ¶ï¼Œå¯¹äºé”™è¯¯çš„å¤„ç†éƒ½æ˜¯ä¸€ç§å¿…å¤‡çš„èƒ½åŠ›\n\nåœ¨`Vue` ä¸­ï¼Œåˆ™æ˜¯å®šä¹‰äº†ä¸€å¥—å¯¹åº”çš„é”™è¯¯å¤„ç†è§„åˆ™ç»™åˆ°ä½¿ç”¨è€…ï¼Œä¸”åœ¨æºä»£ç çº§åˆ«ï¼Œå¯¹éƒ¨åˆ†å¿…è¦çš„è¿‡ç¨‹åšäº†ä¸€å®šçš„é”™è¯¯å¤„ç†ã€‚\n\nä¸»è¦çš„é”™è¯¯æ¥æºåŒ…æ‹¬ï¼š\n\n- åç«¯æ¥å£é”™è¯¯\n- ä»£ç ä¸­æœ¬èº«é€»è¾‘é”™è¯¯\n\n\n\n## äºŒã€å¦‚ä½•å¤„ç†\n\n### åç«¯æ¥å£é”™è¯¯\n\né€šè¿‡`axios`çš„`interceptor`å®ç°ç½‘ç»œè¯·æ±‚çš„`response`å…ˆè¿›è¡Œä¸€å±‚æ‹¦æˆª\n\n```js\napiClient.interceptors.response.use(\n  response => {\n    return response;\n  },\n  error => {\n    if (error.response.status == 401) {\n      router.push({ name: \"Login\" });\n    } else {\n      message.error(\"å‡ºé”™äº†\");\n      return Promise.reject(error);\n    }\n  }\n);\n```\n\n\n\n### ä»£ç é€»è¾‘é—®é¢˜\n\n#### å…¨å±€è®¾ç½®é”™è¯¯å¤„ç†\n\nè®¾ç½®å…¨å±€é”™è¯¯å¤„ç†å‡½æ•°\n\n```js\nVue.config.errorHandler = function (err, vm, info) {\n  // handle error\n  // `info` æ˜¯ Vue ç‰¹å®šçš„é”™è¯¯ä¿¡æ¯ï¼Œæ¯”å¦‚é”™è¯¯æ‰€åœ¨çš„ç”Ÿå‘½å‘¨æœŸé’©å­\n  // åªåœ¨ 2.2.0+ å¯ç”¨\n}\n```\n\n`errorHandler`æŒ‡å®šç»„ä»¶çš„æ¸²æŸ“å’Œè§‚å¯ŸæœŸé—´æœªæ•è·é”™è¯¯çš„å¤„ç†å‡½æ•°ã€‚è¿™ä¸ªå¤„ç†å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œå¯è·å–é”™è¯¯ä¿¡æ¯å’Œ `Vue` å®ä¾‹\n\nä¸è¿‡å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä¸åŒ` Vue` ç‰ˆæœ¬ä¸­ï¼Œè¯¥å…¨å±€ `API` ä½œç”¨çš„èŒƒå›´ä¼šæœ‰æ‰€ä¸åŒï¼š\n\n> ä» 2.2.0 èµ·ï¼Œè¿™ä¸ªé’©å­ä¹Ÿä¼šæ•è·ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­é‡Œçš„é”™è¯¯ã€‚åŒæ ·çš„ï¼Œå½“è¿™ä¸ªé’©å­æ˜¯ `undefined` æ—¶ï¼Œè¢«æ•è·çš„é”™è¯¯ä¼šé€šè¿‡ `console.error` è¾“å‡ºè€Œé¿å…åº”ç”¨å´©\n\n> ä» 2.4.0 èµ·ï¼Œè¿™ä¸ªé’©å­ä¹Ÿä¼šæ•è· Vue è‡ªå®šä¹‰äº‹ä»¶å¤„ç†å‡½æ•°å†…éƒ¨çš„é”™è¯¯äº†\n\n> ä» 2.6.0 èµ·ï¼Œè¿™ä¸ªé’©å­ä¹Ÿä¼šæ•è· `v-on` DOM ç›‘å¬å™¨å†…éƒ¨æŠ›å‡ºçš„é”™è¯¯ã€‚å¦å¤–ï¼Œå¦‚æœä»»ä½•è¢«è¦†ç›–çš„é’©å­æˆ–å¤„ç†å‡½æ•°è¿”å›ä¸€ä¸ª Promise é“¾ (ä¾‹å¦‚ async å‡½æ•°)ï¼Œåˆ™æ¥è‡ªå…¶ Promise é“¾çš„é”™è¯¯ä¹Ÿä¼šè¢«å¤„ç†\n\n\n\n#### ç”Ÿå‘½å‘¨æœŸé’©å­\n\n`errorCaptured`æ˜¯ 2.5.0 æ–°å¢çš„ä¸€ä¸ªç”Ÿå‘½é’©å­å‡½æ•°ï¼Œå½“æ•è·åˆ°ä¸€ä¸ªæ¥è‡ªå­å­™ç»„ä»¶çš„é”™è¯¯æ—¶è¢«è°ƒç”¨\n\nåŸºæœ¬ç±»å‹\n\n```js\n(err: Error, vm: Component, info: string) => ?boolean\n```\n\næ­¤é’©å­ä¼šæ”¶åˆ°ä¸‰ä¸ªå‚æ•°ï¼šé”™è¯¯å¯¹è±¡ã€å‘ç”Ÿé”™è¯¯çš„ç»„ä»¶å®ä¾‹ä»¥åŠä¸€ä¸ªåŒ…å«é”™è¯¯æ¥æºä¿¡æ¯çš„å­—ç¬¦ä¸²ã€‚æ­¤é’©å­å¯ä»¥è¿”å› `false` ä»¥é˜»æ­¢è¯¥é”™è¯¯ç»§ç»­å‘ä¸Šä¼ æ’­\n\nå‚è€ƒå®˜ç½‘ï¼Œé”™è¯¯ä¼ æ’­è§„åˆ™å¦‚ä¸‹ï¼š\n\n- é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœå…¨å±€çš„ `config.errorHandler` è¢«å®šä¹‰ï¼Œæ‰€æœ‰çš„é”™è¯¯ä»ä¼šå‘é€å®ƒï¼Œå› æ­¤è¿™äº›é”™è¯¯ä»ç„¶ä¼šå‘å•ä¸€çš„åˆ†ææœåŠ¡çš„åœ°æ–¹è¿›è¡Œæ±‡æŠ¥\n- å¦‚æœä¸€ä¸ªç»„ä»¶çš„ç»§æ‰¿æˆ–çˆ¶çº§ä»å±é“¾è·¯ä¸­å­˜åœ¨å¤šä¸ª `errorCaptured` é’©å­ï¼Œåˆ™å®ƒä»¬å°†ä¼šè¢«ç›¸åŒçš„é”™è¯¯é€ä¸ªå”¤èµ·ã€‚\n- å¦‚æœæ­¤ `errorCaptured` é’©å­è‡ªèº«æŠ›å‡ºäº†ä¸€ä¸ªé”™è¯¯ï¼Œåˆ™è¿™ä¸ªæ–°é”™è¯¯å’ŒåŸæœ¬è¢«æ•è·çš„é”™è¯¯éƒ½ä¼šå‘é€ç»™å…¨å±€çš„ `config.errorHandler`\n- ä¸€ä¸ª `errorCaptured` é’©å­èƒ½å¤Ÿè¿”å› `false` ä»¥é˜»æ­¢é”™è¯¯ç»§ç»­å‘ä¸Šä¼ æ’­ã€‚æœ¬è´¨ä¸Šæ˜¯è¯´â€œè¿™ä¸ªé”™è¯¯å·²ç»è¢«æå®šäº†ä¸”åº”è¯¥è¢«å¿½ç•¥â€ã€‚å®ƒä¼šé˜»æ­¢å…¶å®ƒä»»ä½•ä¼šè¢«è¿™ä¸ªé”™è¯¯å”¤èµ·çš„ `errorCaptured` é’©å­å’Œå…¨å±€çš„ `config.errorHandler`\n\nä¸‹é¢æ¥çœ‹ä¸ªä¾‹å­\n\nå®šä¹‰ä¸€ä¸ªçˆ¶ç»„ä»¶`cat`\n\n```js\nVue.component('cat', {\n    template:`\n        <div>\n\t\t\t<h1>Cat: </h1>\n        \t<slot></slot>\n        </div>`,\n    props:{\n        name:{\n            required:true,\n            type:String\n        }\n    },\n    errorCaptured(err,vm,info) {\n        console.log(`cat EC: ${err.toString()}\\ninfo: ${info}`); \n        return false;\n    }\n\n});\n```\n\nå®šä¹‰ä¸€ä¸ªå­ç»„ä»¶`kitten`ï¼Œå…¶ä¸­`dontexist()`å¹¶æ²¡æœ‰å®šä¹‰ï¼Œå­˜åœ¨é”™è¯¯\n\n```js\nVue.component('kitten', {\n    template:'<div><h1>Kitten: {{ dontexist() }}</h1></div>',\n    props:{\n        name:{\n            required:true,\n            type:String\n        }\n    }\n});\n```\n\né¡µé¢ä¸­ä½¿ç”¨ç»„ä»¶\n\n```html\n<div id=\"app\" v-cloak>\n    <cat name=\"my cat\">\n        <kitten></kitten>\n    </cat>\n</div>\n```\n\nåœ¨çˆ¶ç»„ä»¶çš„`errorCaptured`åˆ™èƒ½å¤Ÿæ•è·åˆ°ä¿¡æ¯\n\n```js\ncat EC: TypeError: dontexist is not a function\ninfo: render\n```\n\n\n\n### ä¸‰ã€æºç åˆ†æ\n\nå¼‚å¸¸å¤„ç†æºç \n\næºç ä½ç½®ï¼š/src/core/util/error.js\n\n```js\n// Vue å…¨å±€é…ç½®,ä¹Ÿå°±æ˜¯ä¸Šé¢çš„Vue.config\nimport config from '../config'\nimport { warn } from './debug'\n// åˆ¤æ–­ç¯å¢ƒ\nimport { inBrowser, inWeex } from './env'\n// åˆ¤æ–­æ˜¯å¦æ˜¯Promiseï¼Œé€šè¿‡val.then === 'function' && val.catch === 'function', val ï¼=== null && val !== undefined\nimport { isPromise } from 'shared/util'\n// å½“é”™è¯¯å‡½æ•°å¤„ç†é”™è¯¯æ—¶ï¼Œåœç”¨depsè·Ÿè¸ªä»¥é¿å…å¯èƒ½å‡ºç°çš„infinite rendering\n// è§£å†³ä»¥ä¸‹å‡ºç°çš„é—®é¢˜https://github.com/vuejs/vuex/issues/1505çš„é—®é¢˜\nimport { pushTarget, popTarget } from '../observer/dep'\n\nexport function handleError (err: Error, vm: any, info: string) {\n    // Deactivate deps tracking while processing error handler to avoid possible infinite rendering.\n    pushTarget()\n    try {\n        // vmæŒ‡å½“å‰æŠ¥é”™çš„ç»„ä»¶å®ä¾‹\n        if (vm) {\n            let cur = vm\n            // é¦–å…ˆè·å–åˆ°æŠ¥é”™çš„ç»„ä»¶ï¼Œä¹‹åé€’å½’æŸ¥æ‰¾å½“å‰ç»„ä»¶çš„çˆ¶ç»„ä»¶ï¼Œä¾æ¬¡è°ƒç”¨errorCaptured æ–¹æ³•ã€‚\n            // åœ¨éå†è°ƒç”¨å®Œæ‰€æœ‰ errorCaptured æ–¹æ³•ã€æˆ– errorCaptured æ–¹æ³•æœ‰æŠ¥é”™æ—¶ï¼Œè°ƒç”¨ globalHandleError æ–¹æ³•\n            while ((cur = cur.$parent)) {\n                const hooks = cur.$options.errorCaptured\n                // åˆ¤æ–­æ˜¯å¦å­˜åœ¨errorCapturedé’©å­å‡½æ•°\n                if (hooks) {\n                    // é€‰é¡¹åˆå¹¶çš„ç­–ç•¥ï¼Œé’©å­å‡½æ•°ä¼šè¢«ä¿å­˜åœ¨ä¸€ä¸ªæ•°ç»„ä¸­\n                    for (let i = 0; i < hooks.length; i++) {\n                        // å¦‚æœerrorCaptured é’©å­æ‰§è¡Œè‡ªèº«æŠ›å‡ºäº†é”™è¯¯ï¼Œ\n                        // åˆ™ç”¨try{}catch{}æ•è·é”™è¯¯ï¼Œå°†è¿™ä¸ªæ–°é”™è¯¯å’ŒåŸæœ¬è¢«æ•è·çš„é”™è¯¯éƒ½ä¼šå‘é€ç»™å…¨å±€çš„config.errorHandler\n                        // è°ƒç”¨globalHandleErroræ–¹æ³•\n                        try {\n                            // å½“å‰errorCapturedæ‰§è¡Œï¼Œæ ¹æ®è¿”å›æ˜¯å¦æ˜¯falseå€¼\n                            // æ˜¯falseï¼Œcapture = trueï¼Œé˜»æ­¢å…¶å®ƒä»»ä½•ä¼šè¢«è¿™ä¸ªé”™è¯¯å”¤èµ·çš„ errorCaptured é’©å­å’Œå…¨å±€çš„ config.errorHandler\n                            // æ˜¯true capture = faleï¼Œç»„ä»¶çš„ç»§æ‰¿æˆ–çˆ¶çº§ä»å±é“¾è·¯ä¸­å­˜åœ¨çš„å¤šä¸ª errorCaptured é’©å­ï¼Œä¼šè¢«ç›¸åŒçš„é”™è¯¯é€ä¸ªå”¤èµ·\n                            // è°ƒç”¨å¯¹åº”çš„é’©å­å‡½æ•°ï¼Œå¤„ç†é”™è¯¯\n                            const capture = hooks[i].call(cur, err, vm, info) === false\n                            if (capture) return\n                        } catch (e) {\n                            globalHandleError(e, cur, 'errorCaptured hook')\n                        }\n                    }\n                }\n            }\n        }\n        // é™¤éç¦æ­¢é”™è¯¯å‘ä¸Šä¼ æ’­ï¼Œå¦åˆ™éƒ½ä¼šè°ƒç”¨å…¨å±€çš„é”™è¯¯å¤„ç†å‡½æ•°\n        globalHandleError(err, vm, info)\n    } finally {\n        popTarget()\n    }\n}\n// å¼‚æ­¥é”™è¯¯å¤„ç†å‡½æ•°\nexport function invokeWithErrorHandling (\nhandler: Function,\n context: any,\n args: null | any[],\n    vm: any,\n        info: string\n        ) {\n            let res\n            try {\n                // æ ¹æ®å‚æ•°é€‰æ‹©ä¸åŒçš„handleæ‰§è¡Œæ–¹å¼\n                res = args ? handler.apply(context, args) : handler.call(context)\n                // handleè¿”å›ç»“æœå­˜åœ¨\n                // res._isVue an flag to avoid this being observedï¼Œå¦‚æœä¼ å…¥å€¼çš„_isVueä¸ºtureæ—¶(å³ä¼ å…¥çš„å€¼æ˜¯Vueå®ä¾‹æœ¬èº«)ä¸ä¼šæ–°å»ºobserverå®ä¾‹\n                // isPromise(res) åˆ¤æ–­val.then === 'function' && val.catch === 'function', val ï¼=== null && val !== undefined\n                // !res._handled  _handleæ˜¯Promise å®ä¾‹çš„å†…éƒ¨å˜é‡ä¹‹ä¸€ï¼Œé»˜è®¤æ˜¯falseï¼Œä»£è¡¨onFulfilled,onRejectedæ˜¯å¦è¢«å¤„ç†\n                if (res && !res._isVue && isPromise(res) && !res._handled) {\n                    res.catch(e => handleError(e, vm, info + ` (Promise/async)`))\n                    // avoid catch triggering multiple times when nested calls\n                    // é¿å…åµŒå¥—è°ƒç”¨æ—¶catchå¤šæ¬¡çš„è§¦å‘\n                    res._handled = true\n                }\n            } catch (e) {\n                // å¤„ç†æ‰§è¡Œé”™è¯¯\n                handleError(e, vm, info)\n            }\n            return res\n        }\n\n//å…¨å±€é”™è¯¯å¤„ç†\nfunction globalHandleError (err, vm, info) {\n    // è·å–å…¨å±€é…ç½®ï¼Œåˆ¤æ–­æ˜¯å¦è®¾ç½®å¤„ç†å‡½æ•°ï¼Œé»˜è®¤undefined\n    // å·²é…ç½®\n    if (config.errorHandler) {\n        // try{}catch{} ä½å…¨å±€é”™è¯¯å¤„ç†å‡½æ•°\n        try {\n            // æ‰§è¡Œè®¾ç½®çš„å…¨å±€é”™è¯¯å¤„ç†å‡½æ•°ï¼Œhandle error æƒ³å¹²å•¥å°±å¹²å•¥ğŸ’—\n            return config.errorHandler.call(null, err, vm, info)\n        } catch (e) {\n            // å¦‚æœå¼€å‘è€…åœ¨errorHandlerå‡½æ•°ä¸­æ‰‹åŠ¨æŠ›å‡ºåŒæ ·é”™è¯¯ä¿¡æ¯throw err\n            // åˆ¤æ–­errä¿¡æ¯æ˜¯å¦ç›¸ç­‰ï¼Œé¿å…logä¸¤æ¬¡\n            // å¦‚æœæŠ›å‡ºæ–°çš„é”™è¯¯ä¿¡æ¯throw err Error('ä½ å¥½æ¯’')ï¼Œå°†ä¼šä¸€èµ·logè¾“å‡º\n            if (e !== err) {\n                logError(e, null, 'config.errorHandler')\n            }\n        }\n    }\n    // æœªé…ç½®å¸¸è§„logè¾“å‡º\n    logError(err, vm, info)\n}\n\n// é”™è¯¯è¾“å‡ºå‡½æ•°\nfunction logError (err, vm, info) {\n    if (process.env.NODE_ENV !== 'production') {\n        warn(`Error in ${info}: \"${err.toString()}\"`, vm)\n    }\n    /* istanbul ignore else */\n    if ((inBrowser || inWeex) && typeof console !== 'undefined') {\n        console.error(err)\n    } else {\n        throw err\n    }\n}\n```\n\n### å°ç»“\n\n- `handleError`åœ¨éœ€è¦æ•è·å¼‚å¸¸çš„åœ°æ–¹è°ƒç”¨ï¼Œé¦–å…ˆè·å–åˆ°æŠ¥é”™çš„ç»„ä»¶ï¼Œä¹‹åé€’å½’æŸ¥æ‰¾å½“å‰ç»„ä»¶çš„çˆ¶ç»„ä»¶ï¼Œä¾æ¬¡è°ƒç”¨`errorCaptured` æ–¹æ³•ï¼Œåœ¨éå†è°ƒç”¨å®Œæ‰€æœ‰ `errorCaptured` æ–¹æ³•æˆ– `errorCaptured` æ–¹æ³•æœ‰æŠ¥é”™æ—¶ï¼Œè°ƒç”¨ `globalHandleError` æ–¹æ³•\n- `globalHandleError `è°ƒç”¨å…¨å±€çš„ `errorHandler` æ–¹æ³•ï¼Œå†é€šè¿‡`logError`åˆ¤æ–­ç¯å¢ƒè¾“å‡ºé”™è¯¯ä¿¡æ¯\n- `invokeWithErrorHandling`æ›´å¥½çš„å¤„ç†å¼‚æ­¥é”™è¯¯ä¿¡æ¯\n- `logError`åˆ¤æ–­ç¯å¢ƒï¼Œé€‰æ‹©ä¸åŒçš„æŠ›é”™æ–¹å¼ã€‚éç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œè°ƒç”¨`warn`æ–¹æ³•å¤„ç†é”™è¯¯\n\n\n",
    "level": 2,
    "status": 2,
    "appId": 7,
    "createAt": "2021-07-04T03:52:25.000Z",
    "updateAt": "2024-01-25T17:37:52.000Z",
    "updateUserId": 11,
    "isCollected": false,
    "currentIndex": 121,
    "prev": "ca63a7ef-8e3d-4fe4-b697-28138bd96f74",
    "next": "252525e4-0c4c-4e41-9279-41bc59f06f85"
  },
  "post": {
    "exerciseKey": "0cc5abe2-7798-40a6-b930-7dacdb404b8d",
    "category": "QA",
    "title": "ä½ æ˜¯æ€ä¹ˆå¤„ç†vueé¡¹ç›®ä¸­çš„é”™è¯¯çš„ï¼Ÿ",
    "level": 2,
    "updateAt": "2024-01-25T17:37:52+00:00"
  },
  "tag": {
    "id": 14,
    "tagName": "Vue.js",
    "type": "1",
    "exerciseCount": 68
  }
}
