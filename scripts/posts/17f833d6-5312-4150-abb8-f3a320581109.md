---
title: 说说vue中，key的原理
pubDatetime: 2023-07-05T15:34:47.000Z
author: caorushizi
tags:
  - Vue.js
postSlug: 17f833d6-5312-4150-abb8-f3a320581109
description: >-
  在 Vue 中，key 是用于帮助 Vue 识别和跟踪虚拟 DOM 的变化的特殊属性。当 Vue 更新渲染真实 DOM 时，它使用 key
  属性来比较新旧节点，并尽可能地复用已存在的真实 DOM 节点，以提高性能。 Vue 在进行虚拟 DOM 的 diff 算法时，会使用 key
  来匹配新旧节点，以确定节点的更新、移动或删除。它通过 key 属性来判断两个节点是否代表相同的实体，而不仅仅是根据它们
difficulty: 2.5
questionNumber: 239
source: https://fe.ecool.fun/topic/17f833d6-5312-4150-abb8-f3a320581109
---

在 Vue 中，`key` 是用于帮助 Vue 识别和跟踪虚拟 DOM 的变化的特殊属性。当 Vue 更新渲染真实 DOM 时，它使用 `key` 属性来比较新旧节点，并尽可能地复用已存在的真实 DOM 节点，以提高性能。

Vue 在进行虚拟 DOM 的 diff 算法时，会使用 `key` 来匹配新旧节点，以确定节点的更新、移动或删除。它通过 `key` 属性来判断两个节点是否代表相同的实体，而不仅仅是根据它们的内容是否相同。这样可以保留节点的状态和避免不必要的 DOM 操作。

`key` 的工作原理如下：

1. 当 Vue 更新渲染真实 DOM 时，它会对新旧节点进行比较，找出它们之间的差异。
2. 如果两个节点具有相同的 `key` 值，则 Vue 认为它们是相同的节点，会尝试复用已存在的真实 DOM 节点。
3. 如果节点具有不同的 `key` 值，Vue 会将其视为不同的节点，并进行适当的更新、移动或删除操作。

使用 `key` 可以提供更准确的节点识别和跟踪，避免出现一些常见的问题，比如在列表中重新排序时导致的元素闪烁、输入框内容丢失等。

`key` 必须是唯一且稳定的，最好使用具有唯一标识的值，例如使用数据的唯一 ID。同时，不推荐使用随机数作为 `key`，因为在每次更新时都会生成新的 `key`，导致所有节点都重新渲染，无法复用已有的节点，降低性能。
